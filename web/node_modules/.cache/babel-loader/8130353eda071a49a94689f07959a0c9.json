{"ast":null,"code":"import { openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, withModifiers as _withModifiers, normalizeClass as _normalizeClass, renderList as _renderList, Fragment as _Fragment, normalizeStyle as _normalizeStyle, vModelText as _vModelText, withDirectives as _withDirectives, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"row clearfix\"\n};\nconst _hoisted_3 = {\n  class: \"col-lg-12\"\n};\nconst _hoisted_4 = {\n  class: \"card chat-app\"\n};\nconst _hoisted_5 = {\n  class: \"chat\"\n};\nconst _hoisted_6 = {\n  class: \"chat-header clearfix\"\n};\nconst _hoisted_7 = {\n  class: \"row\"\n};\nconst _hoisted_8 = {\n  class: \"col-lg-6\"\n};\nconst _hoisted_9 = {\n  href: \"javascript:void(0);\",\n  \"data-toggle\": \"modal\",\n  \"data-target\": \"#view_info\"\n};\nconst _hoisted_10 = [\"src\"];\nconst _hoisted_11 = {\n  class: \"chat-about\"\n};\nconst _hoisted_12 = [\"textContent\"];\nconst _hoisted_13 = {\n  class: \"col-lg-6 hidden-sm text-right text-white\"\n};\nconst _hoisted_14 = [\"textContent\"];\n\nconst _hoisted_15 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"form-group\",\n  style: {\n    \"display\": \"flex\"\n  }\n}, [/*#__PURE__*/_createElementVNode(\"input\", {\n  type: \"search\",\n  name: \"search\",\n  autocomplete: \"off\"\n}), /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\",\n  class: \"btn btn-link\"\n}, [/*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fa fa-search\"\n})])], -1\n/* HOISTED */\n);\n\nconst _hoisted_16 = [_hoisted_15];\nconst _hoisted_17 = {\n  class: \"chat-history\"\n};\nconst _hoisted_18 = {\n  class: \"m-b-0\"\n};\nconst _hoisted_19 = {\n  style: {\n    \"text-align\": \"center\"\n  }\n};\nconst _hoisted_20 = [\"onClick\", \"is-my-message\"];\nconst _hoisted_21 = [\"textContent\"];\nconst _hoisted_22 = [\"data-id\", \"textContent\"];\nconst _hoisted_23 = [\"textContent\"];\nconst _hoisted_24 = [\"src\"];\nconst _hoisted_25 = {\n  class: \"chat-message clearfix\"\n};\nconst _hoisted_26 = {\n  class: \"input-group mb-0\"\n};\nconst _hoisted_27 = {\n  class: \"input-group mb-3\"\n};\n\nconst _hoisted_28 = /*#__PURE__*/_createElementVNode(\"div\", {\n  id: \"emojis\"\n}, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_29 = [\"href\", \"download\"];\nconst _hoisted_30 = {\n  id: \"contextMenu\",\n  class: \"context-menu\",\n  style: {\n    \"display\": \"none\"\n  }\n};\nconst _hoisted_31 = {\n  class: \"menu\"\n};\nconst _hoisted_32 = {\n  class: \"copy\"\n};\n\nconst _hoisted_33 = /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fa fa-copy\",\n  \"aria-hidden\": \"true\"\n}, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_34 = /*#__PURE__*/_createTextVNode(\" Copy\");\n\nconst _hoisted_35 = [_hoisted_33, _hoisted_34];\nconst _hoisted_36 = {\n  class: \"bookmark\"\n};\n\nconst _hoisted_37 = /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fa fa-bookmark-o\",\n  \"aria-hidden\": \"true\"\n}, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_38 = /*#__PURE__*/_createTextVNode(\" Bookmark\");\n\nconst _hoisted_39 = [_hoisted_37, _hoisted_38];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"a\", _hoisted_9, [$data.receiver != null ? (_openBlock(), _createElementBlock(\"img\", {\n    key: 0,\n    src: $options.getChatPersonPicture($data.receiver),\n    alt: \"avatar\",\n    style: {\n      \"width\": \"50px\"\n    }\n  }, null, 8\n  /* PROPS */\n  , _hoisted_10)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_11, [$data.receiver != null ? (_openBlock(), _createElementBlock(\"h6\", {\n    key: 0,\n    class: \"m-b-0 text-white\",\n    textContent: _toDisplayString($data.receiver.name),\n    style: {\n      \"margin-bottom\": \"0px\",\n      \"position\": \"relative\",\n      \"top\": \"10px\"\n    }\n  }, null, 8\n  /* PROPS */\n  , _hoisted_12)) : _createCommentVNode(\"v-if\", true)])]), _createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn btn-primary\",\n    style: {\n      \"margin-right\": \"10px\"\n    },\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.showBookmarkedMessages && $options.showBookmarkedMessages(...args)),\n    textContent: _toDisplayString($data.isShowingBookmarked ? 'All messages' : 'Bookmarked messages')\n  }, null, 8\n  /* PROPS */\n  , _hoisted_14), _createElementVNode(\"form\", {\n    style: {\n      \"display\": \"inline-block\"\n    },\n    onSubmit: _cache[1] || (_cache[1] = _withModifiers((...args) => $options.doSearch && $options.doSearch(...args), [\"prevent\"]))\n  }, _hoisted_16, 32\n  /* HYDRATE_EVENTS */\n  )])])]), _createElementVNode(\"div\", _hoisted_17, [_createElementVNode(\"ul\", _hoisted_18, [_createElementVNode(\"li\", _hoisted_19, [$data.hasMoreMessages ? (_openBlock(), _createElementBlock(\"i\", {\n    key: 0,\n    class: _normalizeClass($data.btnLoadMoreClass + ' btnLoadMore'),\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.loadMore && $options.loadMore(...args))\n  }, null, 2\n  /* CLASS */\n  )) : _createCommentVNode(\"v-if\", true)]), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.messages, msg => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      class: \"clearfix\",\n      key: msg._id\n    }, [_createElementVNode(\"div\", {\n      class: \"more-options\",\n      onClick: $event => $options.showMoreOptions(msg),\n      \"is-my-message\": _ctx.user != null && _ctx.user.email == msg.sender.email,\n      style: _normalizeStyle(_ctx.user != null && _ctx.user.email == msg.sender.email ? {\n        float: 'right'\n      } : {\n        position: 'relative',\n        top: '15px'\n      })\n    }, null, 12\n    /* STYLE, PROPS */\n    , _hoisted_20), _createElementVNode(\"div\", {\n      class: _normalizeClass('message ' + (_ctx.user != null && _ctx.user.email == msg.sender.email ? 'my-message float-right' : 'other-message'))\n    }, [_createElementVNode(\"p\", {\n      textContent: _toDisplayString(msg.message),\n      class: _normalizeClass(_ctx.user != null && _ctx.user.email == msg.sender.email ? 'text-right' : ''),\n      style: {\n        \"margin-bottom\": \"0px\"\n      }\n    }, null, 10\n    /* CLASS, PROPS */\n    , _hoisted_21), msg.attachment != null ? (_openBlock(), _createElementBlock(\"a\", {\n      key: 0,\n      href: \"javascript:void(0)\",\n      \"data-id\": msg._id,\n      onClick: _cache[3] || (_cache[3] = _withModifiers((...args) => $options.downloadAttachment && $options.downloadAttachment(...args), [\"prevent\"])),\n      textContent: _toDisplayString(msg.attachment.displayName),\n      class: \"text-info\",\n      target: \"_blank\"\n    }, null, 8\n    /* PROPS */\n    , _hoisted_22)) : _createCommentVNode(\"v-if\", true)], 2\n    /* CLASS */\n    ), _createElementVNode(\"div\", {\n      class: _normalizeClass('message-data ' + (_ctx.user != null && _ctx.user.email == msg.sender.email ? 'float-right' : ''))\n    }, [_createElementVNode(\"span\", {\n      class: \"message-data-time text-white\",\n      textContent: _toDisplayString($options.getMessageTime(msg.createdAt)),\n      style: {\n        \"margin-right\": \"10px\"\n      }\n    }, null, 8\n    /* PROPS */\n    , _hoisted_23), _createElementVNode(\"img\", {\n      src: $options.getPicture(msg.sender),\n      alt: \"avatar\",\n      style: {\n        \"width\": \"100px\"\n      }\n    }, null, 8\n    /* PROPS */\n    , _hoisted_24)], 2\n    /* CLASS */\n    )]);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))])]), _createElementVNode(\"div\", _hoisted_25, [_createElementVNode(\"div\", _hoisted_26, [_createElementVNode(\"div\", _hoisted_27, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control send-message\",\n    placeholder: \"Enter text here...\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.message = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $data.message]]), _createElementVNode(\"button\", {\n    class: \"btn btn-primary\",\n    onClick: _cache[5] || (_cache[5] = (...args) => $options.sendMessage && $options.sendMessage(...args)),\n    type: \"button\"\n  }, \" Send \")])]), _hoisted_28])])])])])]), _createElementVNode(\"a\", {\n    href: $data.base64Str,\n    ref: \"btnDownloadAttachment\",\n    download: $data.downloadFileName\n  }, null, 8\n  /* PROPS */\n  , _hoisted_29), _createElementVNode(\"div\", _hoisted_30, [_createElementVNode(\"ul\", _hoisted_31, [_createElementVNode(\"li\", _hoisted_32, [_createElementVNode(\"a\", {\n    href: \"javascript:void(0)\",\n    onClick: _cache[6] || (_cache[6] = (...args) => $options.copyMessage && $options.copyMessage(...args))\n  }, _hoisted_35)]), _createElementVNode(\"li\", _hoisted_36, [_createElementVNode(\"a\", {\n    href: \"javascript:void(0)\",\n    onClick: _cache[7] || (_cache[7] = (...args) => $options.bookmarkMessage && $options.bookmarkMessage(...args))\n  }, _hoisted_39)])])])], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":"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","names":["class","href","_createElementVNode","style","type","name","autocomplete","_hoisted_15","id","_hoisted_33","_hoisted_37","$data","_createElementBlock","src","$options","alt","_toDisplayString","onClick","onSubmit","_Fragment","_renderList","msg","key","_id","_ctx","email","sender","message","attachment","displayName","target","createdAt","placeholder","$event","_hoisted_28","ref","download"],"sourceRoot":"","sources":["D:\\Download\\Compressed\\chat\\web\\src\\components\\ChatComponent.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"row clearfix\">\n      <div class=\"col-lg-12\">\n        <div class=\"card chat-app\">\n          <div class=\"chat\">\n            <div class=\"chat-header clearfix\">\n              <div class=\"row\">\n                <div class=\"col-lg-6\">\n                  <a\n                    href=\"javascript:void(0);\"\n                    data-toggle=\"modal\"\n                    data-target=\"#view_info\"\n                  >\n                    <img\n                      v-if=\"receiver != null\"\n                      v-bind:src=\"getChatPersonPicture(receiver)\"\n                      alt=\"avatar\"\n                      style=\"width: 50px\"\n                    />\n                  </a>\n\n                  <div class=\"chat-about\">\n                    <h6\n                      class=\"m-b-0 text-white\"\n                      v-if=\"receiver != null\"\n                      v-text=\"receiver.name\"\n                      style=\"margin-bottom: 0px; position: relative; top: 10px\"\n                    ></h6>\n                  </div>\n                </div>\n\n                <div class=\"col-lg-6 hidden-sm text-right text-white\">\n                  <button\n                    type=\"button\"\n                    class=\"btn btn-primary\"\n                    style=\"margin-right: 10px\"\n                    v-on:click=\"showBookmarkedMessages\"\n                    v-text=\"isShowingBookmarked ? 'All messages' : 'Bookmarked messages'\"\n                  ></button>\n\n                  <form style=\"display: inline-block\" v-on:submit.prevent=\"doSearch\">\n                    <div class=\"form-group\" style=\"display: flex\">\n                      <input type=\"search\" name=\"search\" autocomplete=\"off\" />\n                      <button type=\"submit\" class=\"btn btn-link\">\n                        <i class=\"fa fa-search\"></i>\n                      </button>\n                    </div>\n                  </form>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"chat-history\">\n              <ul class=\"m-b-0\">\n                <li style=\"text-align: center\">\n                  <i\n                    v-bind:class=\"btnLoadMoreClass + ' btnLoadMore'\"\n                    v-on:click=\"loadMore\"\n                    v-if=\"hasMoreMessages\"\n                  ></i>\n                </li>\n\n                <li v-for=\"msg in messages\" class=\"clearfix\" v-bind:key=\"msg._id\">\n                  <div\n                    class=\"more-options\"\n                    v-on:click=\"showMoreOptions(msg)\"\n                    v-bind:is-my-message=\"user != null && user.email == msg.sender.email\"\n                    v-bind:style=\"\n                      user != null && user.email == msg.sender.email\n                        ? { float: 'right' }\n                        : { position: 'relative', top: '15px' }\n                    \"\n                  ></div>\n\n                  <div\n                    v-bind:class=\"\n                      'message ' +\n                      (user != null && user.email == msg.sender.email\n                        ? 'my-message float-right'\n                        : 'other-message')\n                    \"\n                  >\n                    <p\n                      v-text=\"msg.message\"\n                      v-bind:class=\"\n                        user != null && user.email == msg.sender.email ? 'text-right' : ''\n                      \"\n                      style=\"margin-bottom: 0px\"\n                    ></p>\n\n                    <template v-if=\"msg.attachment != null\">\n                      <a\n                        href=\"javascript:void(0)\"\n                        v-bind:data-id=\"msg._id\"\n                        v-on:click.prevent=\"downloadAttachment\"\n                        v-text=\"msg.attachment.displayName\"\n                        class=\"text-info\"\n                        target=\"_blank\"\n                      ></a>\n                    </template>\n                  </div>\n\n                  <div\n                    v-bind:class=\"\n                      'message-data ' +\n                      (user != null && user.email == msg.sender.email\n                        ? 'float-right'\n                        : '')\n                    \"\n                  >\n                    <span\n                      class=\"message-data-time text-white\"\n                      v-text=\"getMessageTime(msg.createdAt)\"\n                      style=\"margin-right: 10px\"\n                    ></span>\n                    <img\n                      v-bind:src=\"getPicture(msg.sender)\"\n                      alt=\"avatar\"\n                      style=\"width: 100px\"\n                    />\n                  </div>\n                </li>\n              </ul>\n            </div>\n\n            <div class=\"chat-message clearfix\">\n              <div class=\"input-group mb-0\">\n                <div class=\"input-group mb-3\">\n                  <input\n                    type=\"text\"\n                    class=\"form-control send-message\"\n                    placeholder=\"Enter text here...\"\n                    v-model=\"message\"\n                  />\n\n                  <button class=\"btn btn-primary\" v-on:click=\"sendMessage\" type=\"button\">\n                    Send\n                  </button>\n                </div>\n              </div>\n\n              <div id=\"emojis\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <a\n    v-bind:href=\"base64Str\"\n    ref=\"btnDownloadAttachment\"\n    v-bind:download=\"downloadFileName\"\n  ></a>\n\n  <div id=\"contextMenu\" class=\"context-menu\" style=\"display: none\">\n    <ul class=\"menu\">\n      <li class=\"copy\">\n        <a href=\"javascript:void(0)\" v-on:click=\"copyMessage\"\n          ><i class=\"fa fa-copy\" aria-hidden=\"true\"></i> Copy</a\n        >\n      </li>\n\n      <li class=\"bookmark\">\n        <a href=\"javascript:void(0)\" v-on:click=\"bookmarkMessage\"\n          ><i class=\"fa fa-bookmark-o\" aria-hidden=\"true\"></i> Bookmark</a\n        >\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\nimport \"../../public/assets/css/chat.css\";\nimport \"../../public/assets/emoji/emojis.css\";\nimport \"../../public/assets/emoji/DisMojiPicker.js\";\n\nimport axios from \"axios\";\nimport swal from \"sweetalert2\";\nimport store from \"../vuex/store\";\n\nexport default {\n  data() {\n    return {\n      attachment: null,\n      message: \"\",\n      email: this.$route.params.email,\n      page: 0,\n      receiver: null,\n      base64Str: \"\",\n      downloadFileName: \"\",\n      btnLoadMoreClass: \"fa fa-repeat\",\n      hasMoreMessages: true,\n      selectedMessageId: 0,\n      selectedMessageText: \"\",\n      isShowingBookmarked: false,\n      password: \"\",\n    };\n  },\n\n  computed: {\n    messages() {\n      return store.getters.getMessages;\n    },\n  },\n\n  methods: {\n    showBookmarkedMessages: async function () {\n      store.commit(\"setMessages\", []);\n\n      if (this.isShowingBookmarked) {\n        this.page = 0;\n        this.getData();\n        this.isShowingBookmarked = false;\n      } else {\n        const formData = new FormData();\n        formData.append(\"email\", this.email);\n        formData.append(\"password\", this.password);\n\n        const response = await axios.post(\n          this.$apiURL + \"/chat/getBookmarked\",\n          formData,\n          {\n            headers: this.$headers,\n          }\n        );\n        if (response.data.status == \"success\") {\n          for (let a = 0; a < response.data.data.length; a++) {\n            store.commit(\"prependMessage\", response.data.data[a]);\n          }\n          this.attachEventListeners();\n        } else {\n          swal.fire(\"Error\", response.data.message, \"error\");\n        }\n        this.isShowingBookmarked = true;\n      }\n    },\n\n    copyMessage: function () {\n      navigator.clipboard.writeText(this.selectedMessageText);\n    },\n    bookmarkMessage: async function () {\n      const target = event.target;\n      const formData = new FormData();\n      formData.append(\"_id\", this.selectedMessageId);\n      formData.append(\"password\", this.password);\n\n      const response = await axios.post(this.$apiURL + \"/chat/bookmark\", formData, {\n        headers: this.$headers,\n      });\n\n      if (response.data.status == \"success\") {\n        for (let a = 0; a < this.messages.length; a++) {\n          if (this.messages[a]._id == this.selectedMessageId) {\n            this.messages[a] = response.data.newMessage;\n            break;\n          }\n        }\n        store.commit(\"setMessages\", this.messages);\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    },\n\n    hideMoreOptions: function () {\n      document.getElementById(\"contextMenu\").style.display = \"none\";\n    },\n\n    showMoreOptions: function (msg) {\n      const isMyMessage = event.target.getAttribute(\"is-my-message\");\n      this.selectedMessageId = msg._id;\n      this.selectedMessageText = msg.message;\n\n      var menu = document.getElementById(\"contextMenu\");\n      menu.style.display = \"block\";\n      if (isMyMessage == \"true\") {\n        menu.style.left = event.pageX - 200 + \"px\";\n      } else {\n        menu.style.left = event.pageX + \"px\";\n      }\n      menu.style.top = event.pageY + \"px\";\n\n      document.querySelector(\".bookmark i\").className = \"fa fa-bookmark-o\";\n\n      if (msg.bookmarkBy) {\n        document.querySelector(\".bookmark i\").className = \"fa fa-bookmark\";\n      }\n    },\n\n    attachEventListeners: function () {\n      const self = this;\n\n      document.addEventListener(\"click\", function (e) {\n        const moreOptions = document.querySelectorAll(\".more-options\");\n        let isClickedMoreOptions = true;\n        for (let a = 0; a < moreOptions.length; a++) {\n          if (moreOptions[a].contains(e.target)) {\n            isClickedMoreOptions = true;\n            break;\n          } else {\n            isClickedMoreOptions = false;\n          }\n        }\n        if (!isClickedMoreOptions) {\n          self.hideMoreOptions();\n        }\n      });\n    },\n\n    getChatPersonPicture: function (user) {\n      if (typeof user.picture !== \"undefined\" && user.picture != \"\") {\n        return this.$apiURL + \"/\" + user.picture;\n      }\n      return \"../../assets/img/avatar2.png\";\n    },\n\n    getPicture: function (user) {\n      if (typeof user.picture !== \"undefined\") {\n        return this.$apiURL + \"/\" + user.picture;\n      }\n      return \"../../assets/img/avatar7.png\";\n    },\n\n    doSearch: async function () {\n      const form = event.target;\n      const formData = new FormData(form);\n      formData.append(\"email\", this.email);\n      formData.append(\"password\", this.password);\n\n      const response = await axios.post(this.$apiURL + \"/chat/search\", formData, {\n        headers: this.$headers,\n      });\n\n      if (response.data.status == \"success\") {\n        store.commit(\"setMessages\", []);\n        for (let a = 0; a < response.data.data.length; a++) {\n          store.commit(\"prependMessage\", response.data.data[a]);\n        }\n        this.attachEventListeners();\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    },\n\n    downloadAttachment: async function () {\n      const anchor = event.target;\n      const id = anchor.getAttribute(\"data-id\");\n      const originalHtml = anchor.innerHTML;\n      anchor.innerHTML = \"Loading...\";\n\n      const formData = new FormData();\n      formData.append(\"messageId\", id);\n      formData.append(\"password\", this.password);\n\n      const response = await axios.post(this.$apiURL + \"/chat/attachment\", formData, {\n        headers: this.$headers,\n      });\n      if (response.data.status == \"success\") {\n        this.base64Str = response.data.base64Str;\n        this.downloadFileName = response.data.fileName;\n\n        const btnDownloadAttachment = this.$refs[\"btnDownloadAttachment\"];\n        setTimeout(function () {\n          btnDownloadAttachment.click();\n          anchor.innerHTML = originalHtml;\n        }, 500);\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    },\n\n    fileSelected: function () {\n      const files = event.target.files;\n      if (files.length > 0) {\n        this.attachment = files[0];\n      }\n    },\n    selectFile: function () {\n      document.getElementById(\"attachment\").click();\n    },\n    getMessageTime: function (time) {\n      const dateObj = new Date(time);\n      let timeStr =\n        dateObj.getFullYear() +\n        \"-\" +\n        (dateObj.getMonth() + 1) +\n        \"-\" +\n        dateObj.getDate() +\n        \" \" +\n        dateObj.getHours() +\n        \":\" +\n        dateObj.getMinutes() +\n        \":\" +\n        dateObj.getSeconds();\n      return timeStr;\n    },\n    loadMore: function () {\n      this.btnLoadMoreClass = \"fa fa-spinner fa-spin\";\n      this.page++;\n      this.getData();\n    },\n    getData: async function () {\n      if (this.email == null) {\n        return;\n      }\n      const formData = new FormData();\n      formData.append(\"email\", this.email);\n      formData.append(\"page\", this.page);\n      formData.append(\"password\", this.password);\n      const response = await axios.post(this.$apiURL + \"/chat/fetch\", formData, {\n        headers: this.$headers,\n      });\n\n      this.btnLoadMoreClass = \"fa fa-repeat\";\n\n      if (response.data.status == \"success\") {\n        for (let a = 0; a < response.data.messages.length; a++) {\n          store.commit(\"prependMessage\", response.data.messages[a]);\n        }\n        this.hasMoreMessages = response.data.messages.length == 0 ? false : true;\n        this.receiver = response.data.receiver;\n        this.user = response.data.user;\n        this.isArchive = response.data.isArchive;\n        this.attachEventListeners();\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    },\n\n    sendMessage: async function () {\n      const formData = new FormData();\n      formData.append(\"email\", this.email);\n      formData.append(\"message\", this.message);\n      formData.append(\"password\", this.password);\n      if (this.attachment != null) {\n        formData.append(\"attachment\", this.attachment);\n      }\n\n      const response = await axios.post(this.$apiURL + \"/chat/send\", formData, {\n        headers: this.$headers,\n      });\n\n      if (response.data.status == \"success\") {\n        this.message = \"\";\n\n        this.attachment = null;\n        document.getElementById(\"attachment\").value = null;\n\n        store.commit(\"appendMessage\", response.data.messageObject);\n        this.attachEventListeners();\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    },\n\n    initializeEmoji: function () {\n      const self = this;\n      $(\"#emojis\").disMojiPicker();\n      twemoji.parse(document.body);\n      $(\"#emojis\").picker(function (emoji) {\n        self.message += emoji;\n      });\n    },\n  },\n\n  mounted() {\n    this.getData();\n    this.initializeEmoji();\n  },\n\n  watch: {\n    $route: function (to, from) {\n      if (from.href.includes(\"/chat/\")) {\n        store.commit(\"setMessages\", []);\n      }\n    },\n  },\n};\n</script>\n"]},"metadata":{},"sourceType":"module"}