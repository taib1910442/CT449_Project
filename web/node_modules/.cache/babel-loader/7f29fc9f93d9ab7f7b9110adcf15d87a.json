{"ast":null,"code":"import { createElementVNode as _createElementVNode, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, renderList as _renderList, Fragment as _Fragment, normalizeStyle as _normalizeStyle, vModelText as _vModelText, withDirectives as _withDirectives, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"row clearfix\"\n};\nconst _hoisted_3 = {\n  class: \"col-lg-12\"\n};\nconst _hoisted_4 = {\n  key: 0,\n  class: \"card\"\n};\nconst _hoisted_5 = {\n  class: \"card-body\"\n};\n\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"h2\", {\n  class: \"text-center\",\n  style: {\n    \"margin-top\": \"20px\"\n  }\n}, \"This chat has been archived\", -1\n/* HOISTED */\n);\n\nconst _hoisted_7 = {\n  class: \"row\",\n  style: {\n    \"margin-top\": \"100px\",\n    \"margin-bottom\": \"100px\"\n  }\n};\nconst _hoisted_8 = {\n  class: \"offset-md-4 col-md-4\"\n};\n\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"form-group\",\n  style: {\n    \"margin-bottom\": \"10px\"\n  }\n}, [/*#__PURE__*/_createElementVNode(\"label\", null, \"Enter password\"), /*#__PURE__*/_createElementVNode(\"input\", {\n  type: \"password\",\n  name: \"password\",\n  class: \"form-control\",\n  required: \"\",\n  style: {\n    \"margin-top\": \"10px\"\n  }\n})], -1\n/* HOISTED */\n);\n\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"input\", {\n  type: \"submit\",\n  class: \"btn btn-danger\",\n  value: \"Open chat\"\n}, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_11 = [_hoisted_9, _hoisted_10];\nconst _hoisted_12 = {\n  key: 1,\n  class: \"card chat-app\"\n};\nconst _hoisted_13 = {\n  class: \"chat\"\n};\nconst _hoisted_14 = {\n  class: \"chat-header clearfix\"\n};\nconst _hoisted_15 = {\n  class: \"row\"\n};\nconst _hoisted_16 = {\n  class: \"col-lg-6\"\n};\nconst _hoisted_17 = {\n  href: \"javascript:void(0);\",\n  \"data-toggle\": \"modal\",\n  \"data-target\": \"#view_info\"\n};\nconst _hoisted_18 = [\"src\"];\nconst _hoisted_19 = {\n  class: \"chat-about\"\n};\nconst _hoisted_20 = [\"textContent\"];\nconst _hoisted_21 = {\n  class: \"col-lg-6 hidden-sm text-right text-white\"\n};\nconst _hoisted_22 = [\"textContent\"];\n\nconst _hoisted_23 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"form-group\",\n  style: {\n    \"display\": \"flex\"\n  }\n}, [/*#__PURE__*/_createElementVNode(\"input\", {\n  type: \"search\",\n  name: \"search\",\n  autocomplete: \"off\"\n}), /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\",\n  class: \"btn btn-link\"\n}, [/*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fa fa-search\"\n})])], -1\n/* HOISTED */\n);\n\nconst _hoisted_24 = [_hoisted_23];\nconst _hoisted_25 = [\"textContent\"];\n\nconst _hoisted_26 = /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fa fa-paperclip\"\n}, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_27 = [_hoisted_26];\nconst _hoisted_28 = {\n  class: \"chat-history\"\n};\nconst _hoisted_29 = {\n  class: \"m-b-0\"\n};\nconst _hoisted_30 = {\n  style: {\n    \"text-align\": \"center\"\n  }\n};\nconst _hoisted_31 = [\"onClick\", \"is-my-message\"];\nconst _hoisted_32 = [\"textContent\"];\nconst _hoisted_33 = [\"data-id\", \"textContent\"];\nconst _hoisted_34 = [\"textContent\"];\nconst _hoisted_35 = [\"src\"];\nconst _hoisted_36 = {\n  class: \"chat-message clearfix\"\n};\nconst _hoisted_37 = {\n  class: \"input-group mb-0\"\n};\nconst _hoisted_38 = {\n  class: \"input-group mb-3\"\n};\n\nconst _hoisted_39 = /*#__PURE__*/_createElementVNode(\"div\", {\n  id: \"emojis\"\n}, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_40 = [\"href\", \"download\"];\nconst _hoisted_41 = {\n  id: \"contextMenu\",\n  class: \"context-menu\",\n  style: {\n    \"display\": \"none\"\n  }\n};\nconst _hoisted_42 = {\n  class: \"menu\"\n};\nconst _hoisted_43 = {\n  class: \"copy\"\n};\n\nconst _hoisted_44 = /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fa fa-copy\",\n  \"aria-hidden\": \"true\"\n}, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_45 = /*#__PURE__*/_createTextVNode(\" Copy\");\n\nconst _hoisted_46 = [_hoisted_44, _hoisted_45];\nconst _hoisted_47 = {\n  class: \"bookmark\"\n};\n\nconst _hoisted_48 = /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fa fa-bookmark-o\",\n  \"aria-hidden\": \"true\"\n}, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_49 = /*#__PURE__*/_createTextVNode(\" Bookmark\");\n\nconst _hoisted_50 = [_hoisted_48, _hoisted_49];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [$data.isArchive ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"form\", {\n    onSubmit: _cache[0] || (_cache[0] = _withModifiers((...args) => $options.verifyArchivedPassword && $options.verifyArchivedPassword(...args), [\"prevent\"]))\n  }, _hoisted_11, 32\n  /* HYDRATE_EVENTS */\n  )])])])])) : _createCommentVNode(\"v-if\", true), !$data.isArchive ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [_createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"div\", _hoisted_15, [_createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"a\", _hoisted_17, [$data.receiver != null ? (_openBlock(), _createElementBlock(\"img\", {\n    key: 0,\n    src: $options.getChatPersonPicture($data.receiver),\n    alt: \"avatar\",\n    style: {\n      \"width\": \"50px\"\n    }\n  }, null, 8\n  /* PROPS */\n  , _hoisted_18)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_19, [$data.receiver != null ? (_openBlock(), _createElementBlock(\"h6\", {\n    key: 0,\n    class: \"m-b-0 text-white\",\n    textContent: _toDisplayString($data.receiver.name),\n    style: {\n      \"margin-bottom\": \"0px\",\n      \"position\": \"relative\",\n      \"top\": \"10px\"\n    }\n  }, null, 8\n  /* PROPS */\n  , _hoisted_20)) : _createCommentVNode(\"v-if\", true)])]), _createElementVNode(\"div\", _hoisted_21, [_createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn btn-primary\",\n    style: {\n      \"margin-right\": \"10px\"\n    },\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.showBookmarkedMessages && $options.showBookmarkedMessages(...args)),\n    textContent: _toDisplayString($data.isShowingBookmarked ? 'All messages' : 'Bookmarked messages')\n  }, null, 8\n  /* PROPS */\n  , _hoisted_22), _createElementVNode(\"form\", {\n    style: {\n      \"display\": \"inline-block\"\n    },\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.doSearch && $options.doSearch(...args), [\"prevent\"]))\n  }, _hoisted_24, 32\n  /* HYDRATE_EVENTS */\n  ), $data.attachment != null ? (_openBlock(), _createElementBlock(\"span\", {\n    key: 0,\n    style: {\n      \"margin-right\": \"10px\",\n      \"position\": \"relative\",\n      \"top\": \"7px\"\n    },\n    textContent: _toDisplayString($data.attachment.name)\n  }, null, 8\n  /* PROPS */\n  , _hoisted_25)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"a\", {\n    href: \"javascript:void(0);\",\n    class: \"btn btn-outline-secondary pull-right text-white\",\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.selectFile && $options.selectFile(...args))\n  }, _hoisted_27), _createElementVNode(\"input\", {\n    type: \"file\",\n    id: \"attachment\",\n    style: {\n      \"display\": \"none\"\n    },\n    onChange: _cache[4] || (_cache[4] = (...args) => $options.fileSelected && $options.fileSelected(...args))\n  }, null, 32\n  /* HYDRATE_EVENTS */\n  )])])]), _createElementVNode(\"div\", _hoisted_28, [_createElementVNode(\"ul\", _hoisted_29, [_createElementVNode(\"li\", _hoisted_30, [$data.hasMoreMessages ? (_openBlock(), _createElementBlock(\"i\", {\n    key: 0,\n    class: _normalizeClass($data.btnLoadMoreClass + ' btnLoadMore'),\n    onClick: _cache[5] || (_cache[5] = (...args) => $options.loadMore && $options.loadMore(...args))\n  }, null, 2\n  /* CLASS */\n  )) : _createCommentVNode(\"v-if\", true)]), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.messages, msg => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      class: \"clearfix\",\n      key: msg._id\n    }, [_createElementVNode(\"div\", {\n      class: \"more-options\",\n      onClick: $event => $options.showMoreOptions(msg),\n      \"is-my-message\": _ctx.user != null && _ctx.user.email == msg.sender.email,\n      style: _normalizeStyle(_ctx.user != null && _ctx.user.email == msg.sender.email ? {\n        'float': 'right'\n      } : {\n        'position': 'relative',\n        'top': '15px'\n      })\n    }, null, 12\n    /* STYLE, PROPS */\n    , _hoisted_31), _createElementVNode(\"div\", {\n      class: _normalizeClass('message ' + (_ctx.user != null && _ctx.user.email == msg.sender.email ? 'my-message float-right' : 'other-message'))\n    }, [_createElementVNode(\"p\", {\n      textContent: _toDisplayString(msg.message),\n      class: _normalizeClass(_ctx.user != null && _ctx.user.email == msg.sender.email ? 'text-right' : ''),\n      style: {\n        \"margin-bottom\": \"0px\"\n      }\n    }, null, 10\n    /* CLASS, PROPS */\n    , _hoisted_32), msg.attachment != null ? (_openBlock(), _createElementBlock(\"a\", {\n      key: 0,\n      href: \"javascript:void(0)\",\n      \"data-id\": msg._id,\n      onClick: _cache[6] || (_cache[6] = _withModifiers((...args) => $options.downloadAttachment && $options.downloadAttachment(...args), [\"prevent\"])),\n      textContent: _toDisplayString(msg.attachment.displayName),\n      class: \"text-info\",\n      target: \"_blank\"\n    }, null, 8\n    /* PROPS */\n    , _hoisted_33)) : _createCommentVNode(\"v-if\", true)], 2\n    /* CLASS */\n    ), _createElementVNode(\"div\", {\n      class: _normalizeClass('message-data ' + (_ctx.user != null && _ctx.user.email == msg.sender.email ? 'float-right' : ''))\n    }, [_createElementVNode(\"span\", {\n      class: \"message-data-time text-white\",\n      textContent: _toDisplayString($options.getMessageTime(msg.createdAt)),\n      style: {\n        \"margin-right\": \"10px\"\n      }\n    }, null, 8\n    /* PROPS */\n    , _hoisted_34), _createElementVNode(\"img\", {\n      src: $options.getPicture(msg.sender),\n      alt: \"avatar\",\n      style: {\n        \"width\": \"100px\"\n      }\n    }, null, 8\n    /* PROPS */\n    , _hoisted_35)], 2\n    /* CLASS */\n    )]);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))])]), _createElementVNode(\"div\", _hoisted_36, [_createElementVNode(\"div\", _hoisted_37, [_createElementVNode(\"div\", _hoisted_38, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control send-message\",\n    placeholder: \"Enter text here...\",\n    \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => $data.message = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $data.message]]), _createElementVNode(\"button\", {\n    class: \"btn btn-primary\",\n    onClick: _cache[8] || (_cache[8] = (...args) => $options.sendMessage && $options.sendMessage(...args)),\n    type: \"button\"\n  }, \"Send\")])]), _hoisted_39])])])) : _createCommentVNode(\"v-if\", true)])])]), _createElementVNode(\"a\", {\n    href: $data.base64Str,\n    ref: \"btnDownloadAttachment\",\n    download: $data.downloadFileName\n  }, null, 8\n  /* PROPS */\n  , _hoisted_40), _createElementVNode(\"div\", _hoisted_41, [_createElementVNode(\"ul\", _hoisted_42, [_createElementVNode(\"li\", _hoisted_43, [_createElementVNode(\"a\", {\n    href: \"javascript:void(0)\",\n    onClick: _cache[9] || (_cache[9] = (...args) => $options.copyMessage && $options.copyMessage(...args))\n  }, _hoisted_46)]), _createElementVNode(\"li\", _hoisted_47, [_createElementVNode(\"a\", {\n    href: \"javascript:void(0)\",\n    onClick: _cache[10] || (_cache[10] = (...args) => $options.bookmarkMessage && $options.bookmarkMessage(...args))\n  }, _hoisted_50)])])])], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","style","type","name","required","value","_hoisted_9","_hoisted_10","href","autocomplete","_hoisted_23","_hoisted_26","id","_hoisted_44","_hoisted_48","$data","_createElementBlock","_hoisted_6","onSubmit","$options","src","alt","_toDisplayString","onClick","onChange","_Fragment","_renderList","msg","key","_id","_ctx","email","sender","message","attachment","displayName","target","createdAt","placeholder","$event","_hoisted_39","ref","download"],"sourceRoot":"","sources":["D:\\Download\\Compressed\\chat-station-mevn-free\\web\\src\\components\\ChatComponent.vue"],"sourcesContent":["<template>\n\t<div class=\"container\">\n\t\t<div class=\"row clearfix\">\n\t\t\t<div class=\"col-lg-12\">\n\n\t\t\t\t<div class=\"card\" v-if=\"isArchive\">\n\t\t\t\t\t<div class=\"card-body\">\n\t\t\t\t\t\t<h2 class=\"text-center\" style=\"margin-top: 20px;\">This chat has been archived</h2>\n\n\t\t\t\t\t\t<div class=\"row\" style=\"margin-top: 100px; margin-bottom: 100px;\">\n\t\t\t\t\t\t\t<div class=\"offset-md-4 col-md-4\">\n\t\t\t\t\t\t\t\t<form v-on:submit.prevent=\"verifyArchivedPassword\">\n\t\t\t\t\t\t\t\t\t<div class=\"form-group\" style=\"margin-bottom: 10px;\">\n\t\t\t\t\t\t\t\t\t\t<label>Enter password</label>\n\t\t\t\t\t\t\t\t\t\t<input type=\"password\" name=\"password\" class=\"form-control\" required style=\"margin-top: 10px;\" />\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<input type=\"submit\" class=\"btn btn-danger\" value=\"Open chat\" />\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"card chat-app\" v-if=\"!isArchive\">\n\t\t\t\t\t<div class=\"chat\">\n\t\t\t\t\t\t<div class=\"chat-header clearfix\">\n\t\t\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t\t\t<div class=\"col-lg-6\">\n\t\t\t\t\t\t\t\t\t<a href=\"javascript:void(0);\" data-toggle=\"modal\" data-target=\"#view_info\">\n\t\t\t\t\t\t\t\t\t\t<img v-if=\"receiver != null\" v-bind:src=\"getChatPersonPicture(receiver)\" alt=\"avatar\" style=\"width: 50px;\" />\n\t\t\t\t\t\t\t\t\t</a>\n\n\t\t\t\t\t\t\t\t\t<div class=\"chat-about\">\n\t\t\t\t\t\t\t\t\t\t<h6 class=\"m-b-0 text-white\" v-if=\"receiver != null\" v-text=\"receiver.name\" style=\"margin-bottom: 0px; position: relative; top: 10px;\"></h6>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"col-lg-6 hidden-sm text-right text-white\">\n\n\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-primary\" style=\"margin-right: 10px;\" v-on:click=\"showBookmarkedMessages\" v-text=\"isShowingBookmarked ? 'All messages' : 'Bookmarked messages'\"></button>\n\n\t\t\t\t\t\t\t\t\t<form style=\"display: inline-block;\" v-on:submit.prevent=\"doSearch\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"form-group\" style=\"display: flex;\">\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"search\" name=\"search\" autocomplete=\"off\" />\n\t\t\t\t\t\t\t\t\t\t\t<button type=\"submit\" class=\"btn btn-link\">\n\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-search\"></i>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</form>\n\n\t\t\t\t\t\t\t\t\t<span v-if=\"attachment != null\" style=\"margin-right: 10px; position: relative; top: 7px;\" v-text=\"attachment.name\"></span>\n\t\t\t\t\t\t\t\t\t<a href=\"javascript:void(0);\" class=\"btn btn-outline-secondary pull-right text-white\" v-on:click=\"selectFile\"><i class=\"fa fa-paperclip\"></i></a>\n\t\t\t\t\t\t\t\t\t<input type=\"file\" id=\"attachment\" style=\"display: none;\" v-on:change=\"fileSelected\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"chat-history\">\n\t\t\t\t\t\t\t<ul class=\"m-b-0\">\n\t\t\t\t\t\t\t\t<li style=\"text-align: center;\">\n\t\t\t\t\t\t\t\t\t<i v-bind:class=\"btnLoadMoreClass + ' btnLoadMore'\" v-on:click=\"loadMore\" v-if=\"hasMoreMessages\"></i>\n\t\t\t\t\t\t\t\t</li>\n\n\t\t\t\t\t\t\t\t<li v-for=\"msg in messages\" class=\"clearfix\" v-bind:key=\"msg._id\">\n\t\t\t\t\t\t\t\t\t<div class=\"more-options\" v-on:click=\"showMoreOptions(msg)\" v-bind:is-my-message=\"(user != null && user.email == msg.sender.email)\" v-bind:style=\"(user != null && user.email == msg.sender.email) ? { 'float': 'right' } : { 'position': 'relative', 'top': '15px' }\"></div>\n\n\t\t\t\t\t\t\t\t\t<div v-bind:class=\"'message ' + (user != null && user.email == msg.sender.email ? 'my-message float-right' : 'other-message')\">\n\t\t\t\t\t\t\t\t\t\t<p v-text=\"msg.message\" v-bind:class=\"(user != null && user.email == msg.sender.email ? 'text-right' : '')\" style=\"margin-bottom: 0px;\"></p>\n\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"msg.attachment != null\">\n\t\t\t\t\t\t\t\t\t\t    <a href=\"javascript:void(0)\" v-bind:data-id=\"msg._id\" v-on:click.prevent=\"downloadAttachment\" v-text=\"msg.attachment.displayName\" class=\"text-info\" target=\"_blank\"></a>\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div v-bind:class=\"'message-data ' + (user != null && user.email == msg.sender.email ? 'float-right' : '')\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"message-data-time text-white\" v-text=\"getMessageTime(msg.createdAt)\" style=\"margin-right: 10px;\"></span>\n\t\t\t\t\t\t\t\t\t\t<img v-bind:src=\"getPicture(msg.sender)\" alt=\"avatar\" style=\"width: 100px;\" />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"chat-message clearfix\">\n\t\t\t\t\t\t\t<div class=\"input-group mb-0\">\n\t\t\t\t\t\t\t\t<div class=\"input-group mb-3\">\n\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control send-message\" placeholder=\"Enter text here...\" v-model=\"message\" />\n\n\t\t\t\t\t\t\t\t\t<button class=\"btn btn-primary\" v-on:click=\"sendMessage\" type=\"button\">Send</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div id=\"emojis\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<a v-bind:href=\"base64Str\" ref=\"btnDownloadAttachment\" v-bind:download=\"downloadFileName\"></a>\n\n\t<div id=\"contextMenu\" class=\"context-menu\" style=\"display: none\"> \n        <ul class=\"menu\"> \n            <li class=\"copy\"><a href=\"javascript:void(0)\" v-on:click=\"copyMessage\"><i class=\"fa fa-copy\" aria-hidden=\"true\"></i> Copy</a></li>\n\n            <li class=\"bookmark\"><a href=\"javascript:void(0)\" v-on:click=\"bookmarkMessage\"><i class=\"fa fa-bookmark-o\" aria-hidden=\"true\"></i> Bookmark</a></li>\n        </ul> \n    </div>\n</template>\n\n<script>\n\n\timport \"../../public/assets/css/chat.css\"\n\timport \"../../public/assets/emoji/emojis.css\"\n\timport \"../../public/assets/emoji/DisMojiPicker.js\"\n\t\n\timport axios from \"axios\"\n\timport swal from \"sweetalert2\"\n\timport store from \"../vuex/store\"\n\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tattachment: null,\n\t\t\t\tmessage: \"\",\n\t\t\t\temail: this.$route.params.email,\n\t\t\t\tpage: 0,\n\t\t\t\treceiver: null,\n\t\t\t\tbase64Str: \"\",\n\t\t\t\tdownloadFileName: \"\",\n\t\t\t\tbtnLoadMoreClass: \"fa fa-repeat\",\n\t\t\t\thasMoreMessages: true,\n\t\t\t\tselectedMessageId: 0,\n\t\t\t\tselectedMessageText: \"\",\n\t\t\t\tisShowingBookmarked: false,\n\t\t\t\tisArchive: false,\n\t\t\t\tpassword: \"\"\n\t\t\t}\n\t\t},\n\n\t\tcomputed: {\n\t\t    messages() {\n\t\t        return store.getters.getMessages\n\t\t    }\n\t\t},\n\n\t\tmethods: {\n\n\t\t\tverifyArchivedPassword: async function () {\n\t\t\t\tconst self = this\n\t\t\t\tconst form = event.target\n\t\t\t\tconst formData = new FormData(form)\n\t\t\t\tformData.append(\"email\", this.email)\n\t\t\t    \n\t\t\t    const response = await axios.post(\n\t\t\t        this.$apiURL + \"/chat/verifyArchivedPassword\",\n\t\t\t        formData,\n\t\t\t        {\n\t\t\t            headers: this.$headers\n\t\t\t        }\n\t\t\t    )\n\n\t\t\t    if (response.data.status == \"success\") {\n\t\t\t    \tthis.isArchive = response.data.isArchive\n\t\t\t    \tthis.password = form.password.value\n\n\t\t\t    \tif (this.isArchive) {\n\t\t\t    \t\tstore.commit(\"setMessages\", [])\n\t\t\t\t    \tthis.getData()\n\n\t\t\t\t    \tsetTimeout(function () {\n\t\t\t\t    \t\tself.initializeEmoji()\n\t\t\t\t    \t}, 500)\n\t\t\t\t    }\n\t\t\t    } else {\n\t\t\t        swal.fire(\"Error\", response.data.message, \"error\")\n\t\t\t    }\n\t\t\t},\n\n\t\t\tshowBookmarkedMessages: async function () {\n\t\t\t\tstore.commit(\"setMessages\", [])\n\n\t\t\t\tif (this.isShowingBookmarked) {\n\t\t\t\t\tthis.page = 0\n\t\t\t\t\tthis.getData()\n\t\t\t\t\tthis.isShowingBookmarked = false\n\t\t\t\t} else {\n\t\t\t\t\tconst formData = new FormData()\n\t\t\t\t\tformData.append(\"email\", this.email)\n\t\t\t\t\tformData.append(\"password\", this.password)\n\t\t\t\t    \n\t\t\t\t    const response = await axios.post(\n\t\t\t\t        this.$apiURL + \"/chat/getBookmarked\",\n\t\t\t\t        formData,\n\t\t\t\t        {\n\t\t\t\t            headers: this.$headers\n\t\t\t\t        }\n\t\t\t\t    )\n\n\t\t\t\t    if (response.data.status == \"success\") {\n\t\t\t\t    \tfor (let a = 0; a < response.data.data.length; a++) {\n\t\t\t\t\t\t\tstore.commit(\"prependMessage\", response.data.data[a])\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.attachEventListeners()\n\t\t\t\t    } else {\n\t\t\t\t        swal.fire(\"Error\", response.data.message, \"error\")\n\t\t\t\t    }\n\n\t\t\t\t    this.isShowingBookmarked = true\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tcopyMessage: function() {\n\t\t\t\tnavigator.clipboard.writeText(this.selectedMessageText)\n\t\t\t},\n\n\t\t\tbookmarkMessage: async function() {\n\t\t\t\tconst target = event.target\n\t\t\t\tconst formData = new FormData()\n\t\t\t\tformData.append(\"_id\", this.selectedMessageId)\n\t\t\t\tformData.append(\"password\", this.password)\n\t\t\t    \n\t\t\t    const response = await axios.post(\n\t\t\t        this.$apiURL + \"/chat/bookmark\",\n\t\t\t        formData,\n\t\t\t        {\n\t\t\t            headers: this.$headers\n\t\t\t        }\n\t\t\t    )\n\n\t\t\t    if (response.data.status == \"success\") {\n\t\t\t    \tfor (let a = 0; a < this.messages.length; a++) {\n\t\t\t    \t\tif (this.messages[a]._id == this.selectedMessageId) {\n\t\t\t    \t\t\tthis.messages[a] = response.data.newMessage\n\t\t\t    \t\t\tbreak\n\t\t\t    \t\t}\n\t\t\t    \t}\n\t\t\t    \tstore.commit(\"setMessages\", this.messages)\n\t\t\t    } else {\n\t\t\t        swal.fire(\"Error\", response.data.message, \"error\")\n\t\t\t    }\n\t\t\t},\n\n\t\t\thideMoreOptions: function () {\n\t\t\t\tdocument.getElementById(\"contextMenu\").style.display = \"none\"\n\t\t\t},\n\n\t\t\tshowMoreOptions: function (msg) {\n\t\t\t\tconst isMyMessage = event.target.getAttribute(\"is-my-message\")\n\t\t\t\tthis.selectedMessageId = msg._id\n\t\t\t\tthis.selectedMessageText = msg.message\n\t\t\t\t\n\t\t\t\tvar menu = document.getElementById(\"contextMenu\")\n                menu.style.display = 'block'\n                if (isMyMessage == \"true\") {\n                \tmenu.style.left = (event.pageX - 200) + \"px\"\n                } else {\n                \tmenu.style.left = event.pageX + \"px\"\n                }\n                menu.style.top = event.pageY + \"px\"\n\n                document.querySelector(\".bookmark i\").className = \"fa fa-bookmark-o\"\n\n                if (msg.bookmarkBy) {\n                \tdocument.querySelector(\".bookmark i\").className = \"fa fa-bookmark\"\n                }\n\t\t\t},\n\n\t\t\tattachEventListeners: function() {\n\t\t\t\tconst self = this\n\n\t\t\t\tdocument.addEventListener('click', function(e) {\n\t\t\t\t\tconst moreOptions = document.querySelectorAll(\".more-options\")\n\t\t\t\t\tlet isClickedMoreOptions = true\n\t\t\t\t\tfor (let a = 0; a < moreOptions.length; a++) {\n\t\t\t\t\t\tif (moreOptions[a].contains(e.target)) {\n\t\t\t\t\t\t\t// Clicked in box\n\t\t\t\t\t\t\tisClickedMoreOptions = true\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Clicked outside the box\n\t\t\t\t\t\t\tisClickedMoreOptions = false\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!isClickedMoreOptions) {\n\t\t\t\t\t\tself.hideMoreOptions()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\n\t\t\tgetChatPersonPicture: function (user) {\n\t\t\t\tif (typeof user.picture !== \"undefined\" && user.picture != \"\") {\n\t\t\t\t\treturn this.$apiURL + \"/\" + user.picture\n\t\t\t\t}\n\t\t\t\treturn \"../../assets/img/avatar2.png\"\n\t\t\t},\n\n\t\t\tgetPicture: function (user) {\n\t\t\t\tif (typeof user.picture !== \"undefined\") {\n\t\t\t\t\treturn this.$apiURL + \"/\" + user.picture\n\t\t\t\t}\n\t\t\t\treturn \"../../assets/img/avatar7.png\"\n\t\t\t},\n\n\t\t\tdoSearch: async function () {\n\t\t\t\tconst form = event.target\n\t\t\t\tconst formData = new FormData(form)\n\t\t\t\tformData.append(\"email\", this.email)\n\t\t\t\tformData.append(\"password\", this.password)\n\t\t\t    \n\t\t\t    const response = await axios.post(\n\t\t\t        this.$apiURL + \"/chat/search\",\n\t\t\t        formData,\n\t\t\t        {\n\t\t\t            headers: this.$headers\n\t\t\t        }\n\t\t\t    )\n\n\t\t\t    if (response.data.status == \"success\") {\n\t\t\t    \tstore.commit(\"setMessages\", [])\n\t\t\t    \tfor (let a = 0; a < response.data.data.length; a++) {\n\t\t\t\t\t\tstore.commit(\"prependMessage\", response.data.data[a])\n\t\t\t\t\t}\n\t\t\t\t\tthis.attachEventListeners()\n\t\t\t    } else {\n\t\t\t        swal.fire(\"Error\", response.data.message, \"error\")\n\t\t\t    }\n\t\t\t},\n\n\t\t\tdownloadAttachment: async function () {\n\t\t\t    const anchor = event.target\n\t\t\t    const id = anchor.getAttribute(\"data-id\")\n\t\t\t    const originalHtml = anchor.innerHTML\n\t\t\t    anchor.innerHTML = \"Loading...\"\n\n\t\t\t    const formData = new FormData()\n\t\t\t    formData.append(\"messageId\", id)\n\t\t\t    formData.append(\"password\", this.password)\n\t\t\t    \n\t\t\t    const response = await axios.post(\n\t\t\t        this.$apiURL + \"/chat/attachment\",\n\t\t\t        formData,\n\t\t\t        {\n\t\t\t            headers: this.$headers\n\t\t\t        }\n\t\t\t    )\n\n\t\t\t    if (response.data.status == \"success\") {\n\t\t\t        this.base64Str = response.data.base64Str\n\t\t\t        this.downloadFileName = response.data.fileName\n\t\t\t        \n\t\t\t        const btnDownloadAttachment = this.$refs[\"btnDownloadAttachment\"]\n\t\t\t        setTimeout(function () {\n\t\t\t            btnDownloadAttachment.click()\n\t\t\t            anchor.innerHTML = originalHtml\n\t\t\t        }, 500)\n\t\t\t    } else {\n\t\t\t        swal.fire(\"Error\", response.data.message, \"error\")\n\t\t\t    }\n\t\t\t},\n\n\t\t\tfileSelected: function () {\n\t\t\t\tconst files = event.target.files\n\t\t\t\tif (files.length > 0) {\n\t\t\t\t\tthis.attachment = files[0]\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tselectFile: function () {\n\t\t\t\tdocument.getElementById(\"attachment\").click()\n\t\t\t},\n\n\t\t\tgetMessageTime: function (time) {\n\t\t\t\tconst dateObj = new Date(time)\n\t\t\t\tlet timeStr = dateObj.getFullYear() + \"-\" + (dateObj.getMonth() + 1) + \"-\" + dateObj.getDate() + \" \" + dateObj.getHours() + \":\" + dateObj.getMinutes() + \":\" + dateObj.getSeconds()\n\t\t\t\treturn timeStr\n\t\t\t},\n\n\t\t\tloadMore: function () {\n\t\t\t\tthis.btnLoadMoreClass = \"fa fa-spinner fa-spin\"\n\t\t\t\tthis.page++\n\t\t\t\tthis.getData()\n\t\t\t},\n\n\t\t\tgetData: async function () {\n\t\t\t\tif (this.email == null) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tconst formData = new FormData()\n\t\t\t\tformData.append(\"email\", this.email)\n\t\t\t\tformData.append(\"page\", this.page)\n\t\t\t\tformData.append(\"password\", this.password)\n\n\t\t\t\tconst response = await axios.post(\n\t\t\t\t\tthis.$apiURL + \"/chat/fetch\",\n\t\t\t\t\tformData,\n\t\t\t\t\t{\n\t\t\t\t\t\theaders: this.$headers\n\t\t\t\t\t}\n\t\t\t\t)\n\n\t\t\t\tthis.btnLoadMoreClass = \"fa fa-repeat\"\n\n\t\t\t\tif (response.data.status == \"success\") {\n\t\t\t\t\t\n\t\t\t\t\tfor (let a = 0; a < response.data.messages.length; a++) {\n\t\t\t\t\t\tstore.commit(\"prependMessage\", response.data.messages[a])\n\t\t\t\t\t}\n\t\t\t\t\tthis.hasMoreMessages = (response.data.messages.length == 0) ? false : true\n\t\t\t\t\tthis.receiver = response.data.receiver\n\t\t\t\t\tthis.user = response.data.user\n\t\t\t\t\tthis.isArchive = response.data.isArchive\n\t\t\t\t\tthis.attachEventListeners()\n\t\t\t\t} else {\n\t\t\t\t\tswal.fire(\"Error\", response.data.message, \"error\")\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tsendMessage: async function () {\n\n\t\t\t\tconst formData = new FormData()\n\t\t\t\tformData.append(\"email\", this.email)\n\t\t\t\tformData.append(\"message\", this.message)\n\t\t\t\tformData.append(\"password\", this.password)\n\t\t\t\tif (this.attachment != null) {\n\t\t\t\t\tformData.append(\"attachment\", this.attachment)\n\t\t\t\t}\n\n\t\t\t\tconst response = await axios.post(\n\t\t\t\t\tthis.$apiURL + \"/chat/send\",\n\t\t\t\t\tformData,\n\t\t\t\t\t{\n\t\t\t\t\t\theaders: this.$headers\n\t\t\t\t\t}\n\t\t\t\t)\n\n\t\t\t\tif (response.data.status == \"success\") {\n\t\t\t\t\tthis.message = \"\"\n\n\t\t\t\t\tthis.attachment = null\n\t\t\t\t\tdocument.getElementById(\"attachment\").value = null\n\n\t\t\t\t\tstore.commit(\"appendMessage\", response.data.messageObject)\n\t\t\t\t\tthis.attachEventListeners()\n\t\t\t\t} else {\n\t\t\t\t\tswal.fire(\"Error\", response.data.message, \"error\")\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tinitializeEmoji: function() {\n\t\t\t\tconst self = this\n\t\t\t\t$(\"#emojis\").disMojiPicker()\n\t\t\t\ttwemoji.parse(document.body)\n\t\t\t\t$(\"#emojis\").picker(function (emoji) {\n\t\t\t\t\tself.message += emoji\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\n\t\tmounted() {\n\t\t\tthis.getData()\n\t\t\tthis.initializeEmoji()\n\n\t\t\t/*document.addEventListener(\"click\", function () {\n\t\t\t\tself.hideMoreOptions()\n\t\t\t})\n\n       \t\tdocument.oncontextmenu = function () {\n       \t\t\tevent.preventDefault()\n\n\t            if (document.getElementById(\"contextMenu\").style.display == \"block\"){ \n\t                hideMenu(); \n\t            }else{ \n\t                var menu = document.getElementById(\"contextMenu\")      \n\t                menu.style.display = 'block'; \n\t                menu.style.left = event.pageX + \"px\"; \n\t                menu.style.top = event.pageY + \"px\"; \n\t            }\n       \t\t}*/\n\t\t},\n\n\t\twatch: {\n            $route: function (to, from) {\n                if (from.href.includes(\"/chat/\")) {\n                \tstore.commit(\"setMessages\", [])\n                }\n            }\n        },\n\t}\n</script>"]},"metadata":{},"sourceType":"module"}